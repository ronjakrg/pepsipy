{% extends "base.html" %} {% load static %} {% block js %}
<script type="text/javascript" src="{% static 'js/overview.js' %}"></script>
{% endblock %} {% block content %}
<div class="container py-4">
  <form method="post" class="row g-4">
    {% csrf_token %}

    <!-- FORMS -->
    <div class="col-md-3">
      <h5>Welcome to PEPSI Dashboard!</h5>
      <!-- General info -->
      {% for field in gen_form %}
      <div class="form-group mb-2">
        <label for="{{ field.id_for_label }}"> {{ field.label }} </label>
        {{ field }}
      </div>
      {% endfor %}
      <h5>Select peptide features</h5>
      <button
        type="button"
        class="btn btn-gray js-toggle-checkboxes"
        data-checked="true"
      >
        Select all
      </button>
      <button
        type="button"
        class="btn btn-gray js-toggle-checkboxes"
        data-checked="false"
      >
        Unselect all
      </button>
      <!-- Feature selection -->
      {% for forms in forms_list %} {% for form in forms %} {% for field in form
      %}
      <div class="form-group mb-2">
        {% if field.name == 'select' %}
        <label class="form-check-label">
          {{ field }}
          <b>{{ field.label }}</b>
        </label>
        {% else %}
        <div class="ms-4">
          <label class="form-check-label">
            {{ field.label }} {{ field }}
          </label>
        </div>
        {% endif %}
      </div>
      {% endfor %} {% endfor %} {% endfor %}
      <div
        class="position-sticky bg-white"
        style="bottom: 0; padding: 1rem 1rem 1rem 0"
      >
        <button type="submit" class="btn btn-purple">Calculate</button>
      </div>
    </div>

    <!-- DIVIDER -->
    <div class="col-md-1 d-flex justify-content-center">
      <div style="border-left: 1px solid #ccc; height: 100%"></div>
    </div>

    <!-- RESULTS -->
    <div class="col-md-8">
      <h5>Results for peptide of interest: {{ seq }}</h5>
      <table class="table mb-3 w-auto">
        <tbody>
          {% for label, value in computed_peptide_features.items %}
          <tr>
            <th scope="row">{{ label }}</th>
            <td>{{ value }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      <h5>Visualisations</h5>
      {% if plots %} {% for plot in plots %}
      <div class="mb-3">{{ plot|safe }}</div>
      {% endfor %} {% endif %}
    </div>
  </form>
</div>
{% endblock %}
